
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Status das Operações</title> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        /* --- Configurações Globais --- */
        :root {
            --color-primary: #b95c21;
            --color-secondary: #007bff;
            --color-danger: #d9534f;
            --color-warning: #f5a623;
            --color-success: #28a745;
            --color-text-dark: #333;
            --color-text-light: #555;
            --color-text-header: #777;
            --color-text-timestamp: #888;
            --color-border: #e9e9e9;
            --color-bg-page: #ffffff;
            --color-bg-light: #f9f9f9;
            --color-bg-table-header: #f1f1f1;
            --color-success-bg: #e9f7ec;
            --color-card-title-bg: rgba(255, 255, 255, 0.6);
            --color-card-price-bg: #8c4a28;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--color-bg-page);
            color: var(--color-text-dark);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

      /* --- Header (Barra Laranja) --- */
        .top-bar {
            background-color: var(--color-primary);
            color: white;
            padding: 10px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }
        .user-info { display: flex; align-items: center; gap: 12px; }
        .user-info .user-avatar { font-size: 36px; opacity: 0.9; }
        .user-info div { display: flex; flex-direction: column; font-size: 14px; }
        .user-info .user-name { font-weight: 600; }
        .user-info .user-role { font-size: 12px; opacity: 0.8; }
        
        /* --- CSS DA NAVBAR ATUALIZADO --- */
        .header-nav { 
            display: flex; 
            align-items: center; 
            /* Removemos o 'gap' para controle total */
        }
        .header-nav a {
            color: white;
            text-decoration: none;
            opacity: 0.8; 
            
            /* A MÁGICA ESTÁ AQUI:
            Adicionamos padding (espaçamento interno) a CADA link.
            10px em cima/baixo e 15px nos lados.
            Isso cria uma "caixa" de clique igual para cada ícone.
            O espaço entre os ícones será de 15px + 15px = 30px.
            */
            padding: 10px 15px; 
            border-radius: 6px; /* Deixa o hover mais bonito */
            transition: opacity 0.2s, background-color 0.2s;
        }
        .header-nav a:hover {
            opacity: 1; /* Ícone fica 100% visível */
            background-color: rgba(255, 255, 255, 0.1); /* Efeito de fundo sutil */
        }
        .header-nav i { 
            font-size: 20px; 
            cursor: pointer; 
            display: block; /* Garante que o ícone se alinhe bem */
        }
        /* --- FIM DA ATUALIZAÇÃO --- */
      


        /* --- Layout Principal --- */
        .page-container {
            max-width: 1100px;
            width: 95%;
            margin: 32px auto;
            padding: 24px;
            flex-grow: 1;
        }
        .page-header {
            position: relative;
            text-align: center;
            margin-bottom: 32px;
            padding-bottom: 16px;
        }
        .page-header h2 {
            font-size: 20px;
            font-weight: 400;
            color: var(--color-text-header);
            letter-spacing: 0.5px;
            display: inline-block;
            padding-bottom: 8px;
            border-bottom: 1px solid #ccc;
        }
        .page-header .timestamp {
            position: absolute;
            top: 0;
            right: 0;
            font-size: 16px;
            color: var(--color-text-light);
            font-weight: 500;
        }
        .section-title { font-size: 18px; font-weight: 500; color: var(--color-text-header); margin-bottom: 16px; border-bottom: 1px solid var(--color-border); padding-bottom: 8px; }

        /* --- KPIs (Cards de Resumo) --- */
        .kpi-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 32px; }
        .kpi-card { background-color: var(--color-bg-light); border: 1px solid var(--color-border); border-radius: 8px; padding: 20px; display: flex; align-items: center; gap: 16px; }
        .kpi-card .icon { font-size: 28px; width: 40px; text-align: center; }
        .kpi-card .icon.success { color: var(--color-success); }
        .kpi-card .icon.warning { color: var(--color-warning); }
        .kpi-card .icon.danger { color: var(--color-danger); }
        .kpi-card .icon.info, .kpi-card .icon.total { color: var(--color-primary); }
        .kpi-card-info .kpi-value { font-size: 24px; font-weight: 600; color: var(--color-text-dark); display: block; margin-bottom: 4px; }
        .kpi-card-info .kpi-title { font-size: 13px; color: var(--color-text-light); font-weight: 500; text-transform: uppercase; }

        /* --- Listas (Status, Pedidos, Estoque) --- */
        .service-list { display: flex; flex-direction: column; background-color: #fff; border: 1px solid var(--color-border); border-radius: 8px; overflow: hidden; margin-bottom: 32px; }
        .service-item { display: flex; align-items: center; gap: 16px; padding: 16px; border-bottom: 1px solid var(--color-border); transition: background-color 0.1s; flex-wrap: wrap; }
        .service-item:last-child { border-bottom: none; }
        .service-item:hover { background-color: var(--color-bg-light); }
        
        .status-icon { font-size: 24px; width: 28px; text-align: center; }
        .service-icon { font-size: 22px; color: var(--color-text-light); width: 28px; text-align: center; }
        .service-details { display: flex; flex-wrap: wrap; gap: 8px; font-size: 16px; flex-grow: 1; }
        .service-name { font-weight: 600; color: var(--color-text-dark); }
        .service-status { color: var(--color-text-light); }
        
        /* Cores de Status */
        .status-success .status-icon { color: var(--color-success); }
        .status-warning .status-icon { color: var(--color-warning); }
        .status-danger .status-icon { color: var(--color-danger); }
        .status-danger .service-status { color: var(--color-danger); font-weight: 600; }
        
        /* Banner de Alerta Global */
        .status-banner { display: flex; align-items: center; gap: 16px; padding: 16px 20px; border-radius: 4px; margin-bottom: 32px; font-size: 16px; font-weight: 600; background-color: var(--color-banner-bg); color: var(--color-text-dark); }
        .status-banner i { font-size: 24px; color: var(--color-warning); }
        .status-banner.hidden { display: none; } /* Para esconder via JS se tudo estiver OK */

        /* --- Métricas Detalhadas --- */
        .metrics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 32px; }
        .metric-card { background-color: var(--color-bg-light); border: 1px solid var(--color-border); border-radius: 8px; padding: 20px; }
        .metric-card h4 { font-size: 15px; color: var(--color-text-header); font-weight: 600; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
        .metric-card h4 i { color: var(--color-primary); }
        .metric-item { display: flex; justify-content: space-between; font-size: 14px; margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px dashed var(--color-border); }
        .metric-item:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
        .metric-item .label { color: var(--color-text-light); }
        .metric-item .value { font-weight: 600; color: var(--color-text-dark); }
        .metric-card ul { list-style: none; padding-left: 0; }
        .metric-card ul li { font-size: 14px; margin-bottom: 5px; color: var(--color-text-dark); }
        
        /* --- Log de Eventos --- */
        .event-log { background-color: #fff; border: 1px solid var(--color-border); border-radius: 8px; padding: 20px; max-height: 250px; overflow-y: auto; }
        .log-entry { font-size: 14px; color: var(--color-text-light); margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px dashed var(--color-border); }
        .log-entry:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
        .log-entry .log-time { font-weight: 500; color: var(--color-text-timestamp); margin-right: 10px; }
        .log-entry .log-level-INFO { color: var(--color-text-light); }
        .log-entry .log-level-WARN { color: var(--color-warning); font-weight: 500; }
        .log-entry .log-level-ERROR { color: var(--color-danger); font-weight: 600; }

        /* --- Responsividade --- */
        @media (max-width: 768px) {
            .top-bar { flex-direction: column; gap: 16px; padding: 16px; }
            .header-nav { gap: 20px; flex-wrap: wrap; justify-content: center; }
            .page-header { text-align: left; display: flex; flex-direction: column; align-items: flex-start; gap: 8px; }
            .page-header h2 { font-size: 18px; }
            .page-header .timestamp { position: static; font-size: 14px; }
            .page-container { margin-top: 24px; padding: 16px; }
            .kpi-card-info .kpi-value { font-size: 20px; }
            .service-item { gap: 12px; padding: 16px; }
            .service-item .status-icon, .service-item .service-icon { font-size: 20px; width: 24px; }
            .service-item .service-details { font-size: 14px; gap: 4px; }
        }
    </style>
</head>
<body> 
    
    <header class="top-bar">
        <div class="user-info">
            <i class="fa-solid fa-user-circle user-avatar"></i>
            <div>
                <span class="user-name">Felipe</span>
                <span class="user-role">administração da plataforma</span>
            </div>
        </div>
        <nav class="header-nav">
        <a href="Adm_status.html"><i class="fa-solid fa-list-check" title="Status"></i></a>
        <a href="Adm_Ped.html"><i class="fa-solid fa-truck" title="Entregas"></i></a>
        <a href="Adm_anal.html"><i class="fa-solid fa-chart-line" title="Vendas"></i></a>
        <a href="Adam_estoq.html"><i class="fa-solid fa-box" title="Estoque"></i></a>
        <a href="Adm_agen.html"><i class="fa-solid fa-calendar-days" title="Agenda"></i></a>
        <a href="Adm_Func.html"><i class="fa-solid fa-user" title="Funcionários"></i></a>
        <a href="adm_adCard.html"><i class="fa-solid fa-utensils" title="Cardápio"></i></a> 
        <a href="SalgaderiaMestreLogOn.html"><i class="fa-solid fa-arrow-right-from-bracket" title="Sair"></i></a>
      </nav>
    </header>

    <main class="page-container">
        <header class="page-header">
            <h2>STATUS DE SERVIÇO DAS OPERAÇÕES</h2>
            <span class="timestamp" id="current-timestamp">--/--/-- --:--:--</span>
        </header>

        <section class="kpi-container">
             <div class="kpi-card">
                 <i class="fa-solid fa-server icon info"></i>
                 <div class="kpi-card-info">
                     <span class="kpi-value" id="kpi-services-total">0</span>
                     <span class="kpi-title">Serviços Monitorados</span>
                 </div>
             </div>
             <div class="kpi-card">
                 <i class="fa-solid fa-check-circle icon success"></i>
                 <div class="kpi-card-info">
                     <span class="kpi-value" id="kpi-services-ok">0</span>
                     <span class="kpi-title">Serviços Online</span>
                 </div>
             </div>
             <div class="kpi-card">
                 <i class="fa-solid fa-exclamation-triangle icon warning"></i>
                 <div class="kpi-card-info">
                     <span class="kpi-value" id="kpi-services-warn">0</span>
                     <span class="kpi-title">Serviços com Atenção</span>
                 </div>
             </div>
              <div class="kpi-card">
                 <i class="fa-solid fa-shield-halved icon success"></i>
                 <div class="kpi-card-info">
                     <span class="kpi-value">99.9%</span>
                     <span class="kpi-title">Uptime (24h)</span>
                 </div>
             </div>
        </section>

        <div class="status-banner hidden" id="status-banner">
            <i class="fa-solid fa-exclamation-circle"></i>
            <span>ALGUNS SERVIÇOS NECESSITAM ATENÇÃO</span>
        </div>

        <h3 class="section-title">Status Detalhado dos Serviços</h3>
        <section class="service-list" id="service-list">
            <div class="service-item"><span style="color: var(--color-text-light);">Carregando status...</span></div>
        </section>

         <h3 class="section-title">Métricas Atuais</h3>
        <section class="metrics-grid">
            <div class="metric-card">
                <h4><i class="fa-solid fa-truck"></i> Pedidos</h4>
                <div class="metric-item"><span class="label">Pendentes:</span><span class="value">3</span></div>
                <div class="metric-item"><span class="label">Tempo Médio Process.:</span><span class="value">5 min</span></div>
            </div>
             <div class="metric-card">
                <h4><i class="fa-solid fa-chart-line"></i> Vendas</h4>
                 <div class="metric-item"><span class="label">Vendas (Hoje):</span><span class="value">R$ 1.250,50</span></div>
                <div class="metric-item"><span class="label">Ticket Médio:</span><span class="value">R$ 25,10</span></div>
            </div>
             <div class="metric-card">
                <h4><i class="fa-solid fa-box"></i> Estoque</h4>
                 <div class="metric-item"><span class="label">Itens Baixos:</span><span class="value">15%</span></div>
                 <div class="metric-item"><span class="label">Valor Estimado:</span><span class="value">R$ 4.850</span></div>
            </div>
        </section>

        <h3 class="section-title">Log de Eventos Recentes</h3>
        <section class="event-log">
             <div class="log-entry"><span class="log-time">19:35</span> <span class="log-level-WARN">[Estoque]</span> Nível baixo detectado para 'Recheios'.</div>
            <div class="log-entry"><span class="log-time">19:30</span> <span class="log-level-INFO">[Pedidos]</span> Sistema de pedidos reiniciado após atualização.</div>
        </section>
    </main>

    <script type="module">
        // --- 1. IMPORTS DO FIREBASE ---
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-app.js";

        // --- 2. CONFIGURAÇÃO DO FIREBASE ---
        const firebaseConfig = {
            apiKey: "AIzaSyCn694_Aswhv1Fb2dn7pnWox4JVW66Xy2k",
            authDomain: "salgaderia-mestre.firebaseapp.com",
            projectId: "salgaderia-mestre",
            storageBucket: "salgaderia-mestre.firebasestorage.app",
            messagingSenderId: "280285587483",
            appId: "1:280285587483:web:0b36fab366f2e0f2b8b0be",
            measurementId: "G-1QSMWQ65ZZ"
        };
        const app = initializeApp(firebaseConfig);

        // --- 3. DADOS ESTÁTICOS DOS SERVIÇOS ---
        const servicesData = [
            { id: 'pedidos', name: 'PEDIDOS', icon: 'fa-truck', status: 'success', message: '- FUNCIONANDO NORMALMENTE' },
            { id: 'vendas', name: 'VENDAS', icon: 'fa-chart-line', status: 'success', message: '- FUNCIONANDO NORMALMENTE' },
            { id: 'estoque', name: 'ESTOQUE', icon: 'fa-box', status: 'warning', message: '- ALGUNS PRODUTOS ESTÃO COM POUCO ESTOQUE' },
            { id: 'agenda', name: 'AGENDA', icon: 'fa-calendar-days', status: 'success', message: '- FUNCIONANDO NORMALMENTE' },
            { id: 'funcionarios', name: 'FUNCIONÁRIOS', icon: 'fa-user', status: 'success', message: '- FUNCIONANDO NORMALMENTE' },
            { id: 'database', name: 'BANCO DE DADOS', icon: 'fa-database', status: 'success', message: '- CONEXÃO ESTÁVEL' },
        ];

        // --- 4. SELETORES DO DOM ---
        const timestampElement = document.getElementById('current-timestamp');
        const serviceListContainer = document.getElementById('service-list');
        const kpiServicesOk = document.getElementById('kpi-services-ok');
        const kpiServicesWarn = document.getElementById('kpi-services-warn');
        const kpiServicesTotal = document.getElementById('kpi-services-total');
        const statusBanner = document.getElementById('status-banner');

        // --- 5. ATUALIZAÇÃO DO TIMESTAMP ---
        function updateCurrentTime() {
            const now = new Date();
            const optionsDate = { day: '2-digit', month: '2-digit', year: '2-digit' };
            const optionsTime = { hour: '2-digit', minute: '2-digit', second: '2-digit' };
            const date = now.toLocaleDateString('pt-BR', optionsDate);
            const time = now.toLocaleTimeString('pt-BR', optionsTime);
            if (timestampElement) { timestampElement.textContent = `${date} ${time}`; }
        }
        updateCurrentTime();
        setInterval(updateCurrentTime, 1000); // Atualiza a cada segundo

        // --- 6. RENDERIZA LISTA E KPIs ---
        function renderStatusPage() {
            serviceListContainer.innerHTML = ''; 
            let servicesOkCount = 0;
            let servicesWarnCount = 0;
            let hasIssues = false;
            let hasDanger = false;

            servicesData.forEach(service => {
                const item = document.createElement('div');
                item.className = `service-item status-${service.status}`; 
                let statusIconClass = 'fa-check-circle';
                if (service.status === 'warning') {
                    statusIconClass = 'fa-exclamation-circle';
                    servicesWarnCount++;
                    hasIssues = true;
                } else if (service.status === 'danger') {
                    statusIconClass = 'fa-times-circle';
                    servicesWarnCount++;
                    hasIssues = true;
                    hasDanger = true;
                } else {
                    servicesOkCount++;
                }
                item.innerHTML = `
                    <i class="fa-solid ${statusIconClass} status-icon"></i>
                    <i class="fa-solid ${service.icon} service-icon"></i>
                    <div class="service-details">
                        <span class="service-name">${service.name}</span>
                        <span class="service-status">${service.message}</span>
                    </div>
                `;
                serviceListContainer.appendChild(item);
            });

            kpiServicesOk.textContent = servicesOkCount;
            kpiServicesWarn.textContent = servicesWarnCount;
            kpiServicesTotal.textContent = servicesData.length;

            if (hasIssues) {
                statusBanner.classList.remove('hidden');
                if (hasDanger) {
                    statusBanner.querySelector('i').className = 'fa-solid fa-times-circle';
                    statusBanner.querySelector('span').textContent = 'ERRO CRÍTICO EM UM OU MAIS SERVIÇOS!';
                    statusBanner.style.backgroundColor = '#f8d7da';
                    statusBanner.style.color = '#721c24';
                    statusBanner.querySelector('i').style.color = 'var(--color-danger)';
                } else {
                    statusBanner.querySelector('i').className = 'fa-solid fa-exclamation-circle';
                    statusBanner.querySelector('span').textContent = 'ALGUNS SERVIÇOS NECESSITAM ATENÇÃO';
                    statusBanner.style.backgroundColor = 'var(--color-banner-bg)';
                    statusBanner.style.color = 'var(--color-text-dark)';
                    statusBanner.querySelector('i').style.color = 'var(--color-warning)';
                }
            } else {
                statusBanner.classList.add('hidden');
            }
        }

        // --- 7. INICIALIZAÇÃO ---
        renderStatusPage();
    </script>
</body>
</html>